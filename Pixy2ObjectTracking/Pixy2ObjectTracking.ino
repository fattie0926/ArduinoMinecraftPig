#include <Pixy2.h>
#include <stdio.h>
#include <PCM.h>

Pixy2 pixy;

// Speed : 0 ~ 100
// rotationOffset : -255 ~ 255

// Pixy Setup
const int CARROT_SIGNATURE = 1; // 胡蘿蔔的 Signature 為 1

// Setup DC Gear Motor Pin
int pwmPin[2] = {5, 6};  // PWM速度控制

// Global Variable

// Speed Setup
const int MAX_SPEED = 255; // 最大速度
const int MIN_SPEED = 0;   // 最小速度

// Size
const int SIZE_THRESHOLD = 100; // 这个值可以根据您的需要进行调整

// Sliding Window Average
const int numReadings = 3;  // 平滑化窗口的大小
int readings[numReadings];   // 存储读数的数组
int readIndex = 0;           // 当前读数的索引
int total = 0;               // 读数的总和
int average = 0;             // 平均读数

// Pig Sound
const unsigned char sample[] PROGMEM ={255,
255,   2,   0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,   0, 254, 255,   2,
  0, 254, 255,   2,   0, 253, 255,   4,   0, 252, 255,   4,   0, 252, 255,   3,   0, 254, 255,   1,
  0,   0,   0, 255, 255,   2,   0, 253, 255,   3,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,
  0, 254, 255,   1,   0,   0,   0,   0,   0,   1,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,
  0,   0,   0, 255, 255,   1,   0,   0,   0, 255, 255,   2,   0, 254, 255,   1,   0, 255, 255,   1,
  0, 255, 255,   1,   0, 255, 255,   1,   0, 254, 255,   3,   0, 252, 255,   4,   0, 253, 255,   2,
  0, 255, 255,   0,   0,   1,   0, 254, 255,   2,   0, 255, 255, 255, 255,   3,   0, 252, 255,   4,
  0, 252, 255,   3,   0, 254, 255,   1,   0,   1,   0, 253, 255,   3,   0, 253, 255,   2,   0,   0,
  0, 255, 255,   2,   0, 253, 255,   3,   0, 253, 255,   3,   0, 254, 255,   2,   0, 254, 255,   2,
  0, 254, 255,   2,   0, 254, 255,   2,   0, 254, 255,   3,   0, 253, 255,   2,   0, 255, 255,   0,
  0,   1,   0, 254, 255,   3,   0, 253, 255,   3,   0, 254, 255,   0,   0,   1,   0, 255, 255,   1,
  0,   0,   0, 255, 255,   1,   0, 255, 255,   1,   0, 254, 255,   4,   0, 251, 255,   5,   0, 251,
255,   4,   0, 253, 255,   3,   0, 253, 255,   2,   0,   0,   0, 254, 255,   3,   0, 253, 255,   2,
  0, 255, 255,   1,   0, 255, 255,   0,   0,   1,   0, 254, 255,   3,   0, 252, 255,   4,   0, 253,
255,   2,   0, 255, 255, 255, 255,   2,   0, 254, 255,   2,   0, 255, 255,   0,   0, 255, 255,   2,
  0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0, 255, 255,   1,   0, 255,
255,   2,   0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,
  0, 255, 255,   0,   0,   0,   0,   0,   0,   1,   0,   0,   0, 254, 255,   2,   0, 254, 255,   2,
  0, 255, 255,   1,   0, 254, 255,   2,   0, 254, 255,   1,   0,   1,   0, 253, 255,   3,   0, 254,
255,   1,   0,   0,   0, 255, 255,   1,   0,   0,   0, 255, 255,   2,   0, 253, 255,   3,   0, 254,
255,   1,   0,   0,   0, 254, 255,   3,   0, 253, 255,   3,   0, 254, 255,   0,   0,   1,   0, 255,
255,   2,   0, 253, 255,   3,   0, 253, 255,   2,   0,   0,   0, 254, 255,   3,   0, 253, 255,   2,
  0, 255, 255, 255, 255,   3,   0, 253, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,   0,   1,
  0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255,   2,   0, 254, 255,   2,   0, 254, 255,   2,   0, 253, 255,   4,   0, 252, 255,   2,   0,   0,
  0, 255, 255,   2,   0, 253, 255,   3,   0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,
  0,   0,   0,   0,   0, 255, 255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,   0, 253,
255,   3,   0, 253, 255,   3,   0, 255, 255, 254, 255,   3,   0, 253, 255,   3,   0, 254, 255,   1,
  0, 254, 255,   3,   0, 253, 255,   3,   0, 253, 255,   3,   0, 253, 255,   3,   0, 253, 255,   3,
  0, 254, 255,   1,   0, 255, 255,   1,   0,   0,   0, 255, 255,   1,   0,   0,   0,   0,   0, 255,
255,   2,   0, 253, 255,   4,   0, 253, 255,   1,   0,   0,   0, 255, 255,   1,   0, 255, 255,   2,
  0, 254, 255,   1,   0, 254, 255,   3,   0, 253, 255,   4,   0, 252, 255,   2,   0,   0,   0, 255,
255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0, 255, 255,   3,   0, 251, 255,   6,   0, 250,
255,   5,   0, 253, 255,   1,   0,   0,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,
  0,   0,   0, 254, 255,   3,   0, 253, 255,   3,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,
  0, 254, 255,   2,   0, 254, 255,   2,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,
  0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 253, 255,   4,   0, 252, 255,   3,
  0, 253, 255,   2,   0,   0,   0,   0,   0, 255, 255,   0,   0,   1,   0,   0,   0, 255, 255,   1,
  0, 255, 255,   1,   0,   0,   0, 255, 255,   1,   0, 255, 255,   2,   0, 253, 255,   4,   0, 251,
255,   5,   0, 251, 255,   5,   0, 252, 255,   3,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,
  0, 253, 255,   3,   0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,   0, 254,
255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0, 255, 255,   1,   0,   0,   0,   0,
  0,   0,   0, 255, 255,   2,   0, 254, 255,   2,   0, 254, 255,   1,   0,   1,   0, 254, 255,   2,
  0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 254,
255,   1,   0,   0,   0,   0,   0, 255, 255,   2,   0, 253, 255,   3,   0, 254, 255,   1,   0, 255,
255,   1,   0,   0,   0, 255, 255,   1,   0,   0,   0, 255, 255,   2,   0, 253, 255,   3,   0, 255,
255, 255, 255,   2,   0, 254, 255,   1,   0,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   1,
  0, 254, 255,   3,   0, 253, 255,   3,   0, 253, 255,   3,   0, 253, 255,   3,   0, 254, 255,   0,
  0,   2,   0, 252, 255,   5,   0, 252, 255,   3,   0, 254, 255,   1,   0, 255, 255,   1,   0,   0,
  0, 255, 255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,   0, 255, 255, 255, 255,   2,
  0, 254, 255,   2,   0, 255, 255,   0,   0,   1,   0, 254, 255,   3,   0, 252, 255,   4,   0, 253,
255,   1,   0,   1,   0, 254, 255,   1,   0,   1,   0, 253, 255,   4,   0, 252, 255,   4,   0, 253,
255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 255, 255,   0,   0,   0,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   0, 254, 255,   3,   0, 252, 255,   4,   0, 253,
255,   2,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  0,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   2,   0, 252, 255,   4,   0, 253, 255,   2,
  0,   0,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255,
255,   0,   0,   0,   0,   1,   0, 255, 255,   2,   0, 253, 255,   2,   0, 254, 255,   4,   0, 251,
255,   5,   0, 251, 255,   4,   0, 255, 255,   1,   0, 254, 255,   2,   0, 255, 255,   1,   0,   0,
  0, 254, 255,   1,   0,   1,   0, 253, 255,   4,   0, 252, 255,   3,   0, 254, 255,   0,   0,   1,
  0, 255, 255,   0,   0,   0,   0, 255, 255,   1,   0, 255, 255,   0,   0,   1,   0, 255, 255,   1,
  0, 255, 255,   2,   0, 254, 255,   2,   0,   0,   0, 254, 255,   3,   0, 253, 255,   1,   0,   0,
  0, 255, 255,   1,   0,   0,   0,   0,   0,   0,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255,
255,   1,   0, 254, 255,   2,   0, 255, 255,   1,   0,   0,   0, 255, 255,   2,   0, 253, 255,   2,
  0,   0,   0,   0,   0,   1,   0, 254, 255,   2,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255,
255,   2,   0, 254, 255,   1,   0, 255, 255,   0,   0,   1,   0, 254, 255,   2,   0, 253, 255,   1,
  0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   3,   0, 253, 255,   4,
  0, 255, 255,   0,   0,   1,   0, 254, 255,   1,   0,   1,   0, 255, 255,   2,   0, 255, 255, 254,
255,   4,   0, 252, 255,   3,   0, 255, 255, 255, 255,   2,   0, 255, 255, 255, 255,   1,   0, 253,
255,   4,   0, 254, 255,   1,   0, 255, 255,   0,   0, 255, 255,   1,   0,   1,   0, 254, 255,   2,
  0, 255, 255,   1,   0, 255, 255, 255, 255,   2,   0, 254, 255,   2,   0, 255, 255,   1,   0,   0,
  0, 255, 255,   3,   0, 253, 255,   0,   0,   1,   0, 253, 255,   6,   0, 251, 255,   2,   0, 254,
255,   2,   0,   0,   0,   1,   0, 253, 255,   1,   0,   1,   0,   0,   0,   3,   0, 251, 255,   6,
  0, 250, 255,   7,   0, 251, 255,   3,   0, 254, 255,   0,   0,   0,   0, 255, 255,   3,   0, 253,
255,   2,   0, 254, 255, 255, 255,   2,   0, 253, 255,   4,   0, 250, 255,   5,   0, 253, 255,   4,
  0, 253, 255,   2,   0,   0,   0,   0,   0,   0,   0, 255, 255,   0,   0,   0,   0,   0,   0,   1,
  0,   0,   0,   0,   0,   1,   0, 255, 255,   1,   0,   0,   0, 255, 255,   2,   0,   0,   0, 255,
255,   1,   0, 254, 255,   4,   0, 253, 255,   3,   0, 253, 255,   3,   0, 255, 255,   0,   0,   1,
  0,   0,   0,   1,   0,   0,   0, 255, 255,   1,   0,   1,   0, 255, 255,   1,   0, 254, 255,   1,
  0, 254, 255,   2,   0,   0,   0,   1,   0, 255, 255,   1,   0,   0,   0,   1,   0, 255, 255,   1,
  0, 255, 255,   2,   0, 254, 255,   3,   0, 255, 255,   0,   0,   2,   0, 253, 255,   3,   0, 254,
255,   0,   0,   2,   0, 254, 255,   1,   0,   1,   0,   0,   0, 254, 255,   3,   0, 252, 255,   5,
  0, 252, 255,   2,   0, 255, 255,   1,   0,   0,   0,   2,   0, 251, 255,   4,   0, 253, 255,   2,
  0, 253, 255,   3,   0, 255, 255,   3,   0, 255, 255, 255, 255,   1,   0,   1,   0,   0,   0,   1,
  0, 255, 255,   2,   0, 255, 255,   2,   0, 253, 255,   2,   0, 254, 255,   0,   0,   2,   0, 252,
255,   2,   0, 253, 255,   2,   0,   0,   0, 254, 255,   3,   0, 255, 255,   2,   0,   0,   0, 255,
255,   3,   0, 254, 255,   1,   0,   0,   0,   0,   0,   1,   0, 255, 255,   0,   0, 253, 255,   2,
  0,   0,   0,   0,   0,   2,   0, 252, 255,   5,   0, 255, 255,   0,   0,   2,   0, 253, 255,   3,
  0, 255, 255, 255, 255,   1,   0, 255, 255,   2,   0, 252, 255,   4,   0, 252, 255,   3,   0, 252,
255,   1,   0,   0,   0, 255, 255,   0,   0,   1,   0,   0,   0,   3,   0, 255, 255,   0,   0,   0,
  0,   0,   0,   2,   0, 255, 255,   1,   0, 254, 255,   1,   0,   0,   0,   1,   0,   1,   0,   0,
  0, 255, 255,   0,   0, 255, 255,   1,   0, 254, 255,   3,   0, 251, 255,   3,   0, 252, 255,   2,
  0,   0,   0,   0,   0,   2,   0,   0,   0, 255, 255,   1,   0, 252, 255,   3,   0, 254, 255,   1,
  0,   1,   0,   0,   0, 253, 255, 255, 255,   1,   0, 253, 255,   3,   0, 252, 255,   3,   0, 252,
255,   1,   0, 253, 255,   7,   0, 250, 255,   1,   0, 253, 255, 255, 255,   1,   0,   0,   0,   5,
  0, 255, 255,   5,   0,   1,   0,   4,   0,   1,   0,   5,   0,   3,   0,   0,   0, 248, 255,   5,
  0, 247, 255,   0,   0,  10,   0,   1,   0,   0,   0, 249, 255,   0,   0,   7,   0, 255, 255,   0,
  0,  11,   0,   6,   0, 251, 255,   2,   0, 252, 255,   9,   0, 252, 255,   2,   0,   0,   0, 238,
255, 246, 255, 255, 255,   1,   0,   4,   0, 248, 255,   4,   0, 255, 255,   5,   0,   3,   0,   7,
  0,   1,   0, 255, 255,   6,   0, 244, 255,   6,   0, 254, 255,   2,   0,   5,   0, 249, 255, 246,
255, 254, 255,   0,   0, 251, 255, 252, 255, 253, 255,  15,   0,  10,   0,  11,   0, 249, 255,   4,
  0,   5,   0, 254, 255,   5,   0, 247, 255, 244, 255, 231, 255, 238, 255,   6,   0, 248, 255,  12,
  0, 248, 255, 239, 255,   2,   0, 224, 255,   1,   0,  12,   0, 238, 255, 255, 255, 226, 255, 250,
255, 249, 255,  19,   0,  20,   0, 232, 255,   3,   0, 252, 255, 244, 255,  16,   0,   6,   0,  22,
  0, 244, 255, 241, 255, 237, 255, 221, 255,  32,   0,   8,   0,  31,   0,   8,   0,   5,   0,  21,
  0, 239, 255, 254, 255, 244, 255,  29,   0,  39,   0,   6,   0,  16,   0, 233, 255, 219, 255,   8,
  0, 222, 255,  27,   0, 236, 255, 241, 255, 234, 255, 227, 255,  43,   0,  52,   0,  71,   0,  51,
  0,  80,   0,  33,   0,  11,   0, 223, 255, 223, 255, 254, 255, 246, 255, 207, 255, 201, 255,  29,
  0,  12,   0,  73,   0,  65,   0,  38,   0,  30,   0,  45,   0,  93,   0,  77,   0, 105,   0,  54,
  0,  26,   0, 251, 255,  21,   0,  31,   0,  16,   0, 222, 255, 199, 255, 197, 255, 172, 255, 194,
255,  19,   0, 170, 255, 239, 255, 108,   0, 241, 255, 240, 255, 201, 255, 242, 255, 209, 255, 184,
255, 126, 255,  92, 255,   7, 255,  45, 255, 220, 255, 254, 255,  63,   0,  52,   0, 104,   0, 108,
  0,  42,   0,  14,   0, 174, 255, 187, 255, 249, 255, 255, 255, 234, 255,  44,   0,   8,   0,   1,
  0, 196,   0, 134,   0, 141,   0, 169,   0, 148,   0, 150,   0, 139,   0,  49,   0, 112,   0, 160,
  0, 100,   0, 106,   0,  56,   0, 167, 255, 123, 255, 197, 255, 162, 255, 225, 255, 130, 255, 107,
255, 212, 255, 122, 255,  67, 255,  61, 255,  84, 255, 108, 255, 181, 255, 210, 255, 176, 255,  98,
255,  30, 255,  15,   0,  65,   0, 136,   0,  39,   0, 206, 255, 186, 255, 171, 255, 160,   0,  84,
  0,  40,   0, 197, 255, 177, 255, 212, 255, 151, 255, 116,   0, 194,   0,   8,   0,  10,   0, 252,
255,  94,   0,  32,   0, 162,   0, 135,   0, 151, 255,  19,   0, 206, 255,  98,   0, 105,   0, 209,
255,   2,   0,   8,   0,  72,   0,  10,   0, 104,   0, 113,   0, 223,   0,  59,   1, 197,   0, 124,
  0, 225, 255, 187, 255,  94,   0,  27,   0,  20,   0,  78, 255, 176, 255, 103,   0,  90, 255, 165,
  0, 180, 255,  71,   0,  95,   0, 217, 255, 124, 255, 107, 254, 124, 255,  77, 255, 210, 255,   7,
255, 228, 254, 214, 255, 233, 255, 117, 255,  50,   0,  25,   0, 144, 255, 130,   0, 226,   0,  13,
  1,  94,   0, 208, 255, 233, 255,  99,   0, 162, 255,  23,   0,  77,   0,  51,   0,  33,   0,  56,
255, 243, 254, 173, 255, 127,   0, 238, 255, 129, 255, 186, 254, 203, 254, 204, 254,  49, 255,  42,
255, 126, 255,  13,   0, 208, 255, 211, 255, 152, 255,  90, 255, 187, 255,  42, 254,  29, 253, 202,
252, 230, 255, 250,   7, 112,  10, 191,   7, 145,   2, 224, 253, 170, 254, 210,   1,  89,   2, 201,
  0, 218, 252, 207, 250, 180, 252, 159,   0, 156,   2, 208,   2,  60,   1, 136,   0,  85,   0, 235,
255, 211, 255, 128, 252,  22, 251, 164, 251, 157, 255, 183,   3, 213,   2,  17,   0, 250, 252, 186,
251,  88, 255,  67, 255, 167, 252,  19, 252, 119, 252,  67, 255, 165,   0,  46, 255,  25, 253, 163,
253,  21,   2, 148,   6,  17,   6, 149,   2, 220, 254,  69, 253,  96, 255,  84,   0,  82,   0, 125,
  0, 243, 255,  44,   3,   7,   6, 177,   6,   4,   5,  59,   2, 170,   1,  77,   2, 206,   1,  94,
  1,   0, 254, 193, 250,  81, 252, 206, 253, 139, 255,  13,   0, 142,   0, 189, 255, 173,   0, 250,
  1,  16,   0, 155, 253, 232, 252, 102, 254, 141,   0,  19,   2, 155,   0, 233, 253, 100, 253,  93,
255,  79,   1, 161,   1, 232, 254,  25, 254, 224, 252,  25, 252, 244, 251, 241, 249,  42, 250, 123,
250, 156,   0, 112,   6, 252,   5,  19,   3, 125,   0,  58,   1,  24,   4,  44,   7, 106,   5, 250,
254,  94, 251, 213, 252, 196, 254, 190,   2, 223,   2,  18,   1,  92, 255, 213, 255, 160,   1,  60,
  1, 228, 252,  26, 247,  57, 245,  66, 245, 109, 255, 198,   5, 214,   7, 164,   5, 147,   1, 165,
  3, 122,   6, 152,   7, 209,   1, 114, 254,   3, 254, 150,   0,  36,   3,  93,   4, 168,   3,  54,
  1, 255,   0, 218, 253, 112, 252, 195, 254, 130, 252, 148, 249, 196, 243, 128, 241, 117, 255,  78,
 13, 160,  14,  47,   3, 128, 248, 118, 248, 109, 255, 194,   3, 212,   1,  20, 254, 156, 255, 154,
  3,  64,   3,  18,   1, 226,   1, 183,   4, 244,   2, 200, 255,  82, 250,  51, 249,  54, 251, 207,
249, 126, 244, 221, 242, 157, 250, 220,   4, 180,  13, 112,  15,  39,   9, 244,   1,  41, 251, 136,
250, 216,   0, 255,   4,  43,   4, 244, 255,  32, 255, 107,   1,  99,  10, 252,  11, 134,   7,  92,
  1,  63, 251,  19, 249,  37, 249, 118, 251,  22, 249,  94, 244,  70, 238, 234, 241,  23, 245,  56,
246, 181, 247, 194, 250,  91, 246, 222, 245,  89,   2, 217,  14, 144,  36, 230,  53, 161,  45,   8,
 13,   5, 235, 124, 222,  92, 232, 118, 244, 201, 253,  28,   1, 137,   3, 174,   7,  64,  11, 129,
  8, 102,   9,   0, 243, 203, 222, 129, 216,  32, 214,  43,   9,  55,  56,  90,  49, 194,  11, 193,
247,  93,   1,  30,  48, 156,  64, 131,  21,  47, 225,   2, 194,  80, 211, 140, 245, 189,  14, 178,
 17, 147,  18,  14,  25, 166,  21,   6,   6,  56, 247, 114, 226, 187, 217, 130, 227,   7, 235, 232,
244,   5, 254, 150, 253, 171, 244,  73, 250,  33,   0,   6,   2, 232, 252,  37, 249, 108,   1, 155,
  6, 197,  10, 160,   2,  82, 252, 217,   2,  61,  15, 115,  27,  48,  16, 249, 249, 248, 236,  58,
237, 140, 246, 196,   4, 243,  10,  24,   5,  82,   2, 226,   5, 219,   9, 201,   1,  64, 244, 225,
237, 238, 247,  69,   5,  11,  15, 139,  12,   8,   6,  42,   7,  33,   9, 232,   8, 145,   5, 148,
253, 202, 235, 158, 224, 153, 233, 195, 243, 189, 235, 199, 228, 162, 223, 103,   0, 249,  54, 120,
 84,  73,  54, 179, 241, 125, 201, 233, 201,  42,   2,  81,  37, 213,  23, 190, 245,   0, 220, 203,
242,  48,  40,  82,  74,  53,  53,  46,  14, 238, 246, 108, 255,   4,  12, 146, 250, 175, 229,   0,
216, 128, 226,   6,   4,  15,  28,  93,  23,  64, 250, 215, 233, 119, 242, 111, 249,  75, 251,  94,
248, 124, 244,  58, 255, 170,   5, 191,   0,  71, 249, 183, 244,  44, 247,   9,   2, 207,   8,  90,
  4,  77, 248,  68, 242, 181, 252, 219,   7, 176,  13, 185,   9,  93,   3, 238, 250, 125, 244, 250,
243,  35, 249,  48,   0,  14, 254,  99,   0, 122,   8, 252,  13, 160,  15, 103,  13,  87,   5, 147,
  2, 160,   5, 192,   9,  47,   5, 248, 248,  71, 243,  70, 240, 155, 251, 159,   9, 233,  11,  58,
  9, 233,  11, 228,  13, 146,  14, 156,  11, 135,   1, 113, 255, 148, 252,  21, 252, 236, 251, 234,
246,  37, 240, 178, 235,  71, 234,  86, 242,  15,   2,  98,   4, 167, 253,  55,   1, 216,   3, 193,
  4, 173,  18, 227,  20, 213,  13, 201,   7, 147,   5, 101,  17, 131,   8,  72, 251,  74, 246, 235,
238, 214, 241, 212, 249,  76,   3,  20,   8, 160, 250, 236, 222, 154, 244, 185, 250,   8, 255,  63,
211, 215, 182, 118, 251, 105,  55, 255, 127, 214,  64,  99, 242, 213, 201,  28, 236,  29,  76,  74,
 59, 210,   7, 202, 178,  39, 172, 254, 225,   5,  11, 149,  24, 206,   2,  24, 243, 228,   0,  16,
 15, 129,  16, 253, 249, 111, 228,  98, 235,  88, 238, 189,  14, 167,  10,  42, 255,  59, 223, 249,
207, 171, 241, 221,  14,  96,  24, 255, 249, 144, 245,  15,   3, 253,  28, 166,  26,  85,   6, 190,
245, 202, 248,  78,  13, 227,  15,  62,  19, 239,   0,  94, 248, 167, 245,  92,   2,  47,  24,  59,
 15,  77, 254, 116, 234,  80, 236,  18, 241,  25, 245, 134, 248,  20, 245, 107, 248,  32,   2, 178,
 18,  52,  21, 160,  12,  97,   2,  53,   2, 184,   3,  35, 252, 195, 243, 134, 238,  53, 235, 128,
239, 158, 251, 218,   2,  77, 254, 245, 248, 100, 248, 156,   3,   9,  26, 154,  29,  50,  22,  45,
 12,  73,  16,  82,  20, 177,  17, 208,   6, 217, 244, 121, 245, 141, 246, 221, 253, 100,   2, 204,
  5, 217,   5,  19,   0,  42,   2, 208,   2,   8,   2, 250, 250, 117, 241,  15, 238, 154, 238, 254,
246,  92, 250,  68, 250,  54, 253, 245,   3,  35,  16, 238,  20,  94,  17,  87,   6,  51, 255,  43,
  1, 171,   9,  57,  13,  17,   6, 183, 248, 172, 244, 155, 251, 134,   0, 147,   0, 177, 244,   0,
243, 108, 246,  19, 252, 176,   2, 236,   2,  19,   4, 183, 248,   4, 245, 161, 244, 175, 249,  21,
  1,  66,   0, 206,   0, 195, 251, 219,   0, 208,   3, 142,   0, 172, 255,  51,   6, 132,  19, 221,
 17,  30,   5, 166, 247,   8, 241, 161, 240, 208, 249, 125, 254, 248, 246,  85, 245, 158, 250,  65,
254, 233, 247, 147, 247, 233, 252, 233,   4, 229,   7, 112,   1,  12, 251,  23, 249, 113, 253,  66,
255, 248, 255,  48, 255, 238, 254,  99,   2,  68,   7,  47,   9,  37,  14, 183,  14,  28,  14, 198,
  9, 192,   3,  94,   6,  74,   3, 202, 253,  48, 247, 222, 244, 189, 244, 114, 251,  62,   7,  96,
 15, 112,  22,  63,  19, 215,  10,  18,   0, 240, 246, 144, 245, 131, 252,  52,   1, 182, 253, 204,
247,  17, 242,  14, 246, 243, 249, 142, 251, 233, 241,  73, 233,  75, 237,  64, 240, 238, 247, 168,
  7, 113,  41,  89,  69,  88,  58, 243,  12,  32, 220, 160, 198, 132, 222, 189,   7, 104,  24, 212,
  4,  21, 236, 237, 233, 112, 251, 112,  24,  43,  37, 128,  33,  61,  11, 144, 243, 190, 235, 225,
234, 251, 234, 206, 236, 106, 243,  85,   2, 112,  18,  60,  29, 231,  21, 159, 249, 159, 226,  68,
218,  79, 231,  86, 251,  61,  15, 104,  19,  29,   9, 245, 252, 145, 247, 162, 252, 245,   5, 238,
 15,  35,  17,  65,   9, 107, 255, 156, 250,  95, 241, 117, 238,  57, 246,  38,   6,  93,  13,  17,
  8, 178, 255, 125, 251,  28,   0, 214,  10, 112,  14,  96,   8,   9,   2,  95, 254, 211, 252,  40,
245,  70, 240, 156, 241,   2, 249, 189, 252, 227,   0,   6,   0, 101, 254, 104, 254, 139, 255,   2,
253,  97, 246,  47, 244,  98, 246, 141, 255,  32,   3, 115,   5,  27,   2, 133,   0, 108,   3,  12,
 10,  98,  15, 183,  14, 198,   9, 158,   2, 223,   0, 241,   0, 165,   3,  54,   5, 209,   4,  99,
  5, 182,   6,  71,  12, 144,  15, 111,  12, 120,   6, 163,   1, 111,   1,   1,   1, 250,   1, 165,
  0, 149, 251, 100, 246, 237, 244, 129, 247, 229, 247, 151, 248, 160, 245, 231, 245,  25, 248, 149,
250,  11, 253,  43, 251, 134, 245,   4, 239, 203, 239,  81, 240, 179, 251, 197,   7, 109,  23, 188,
 33, 245,  29,  12,  17, 178, 255, 126, 250, 234, 248, 111, 255,  14,   0, 153, 251, 141, 249,  72,
253, 182,   8, 208,  16, 104,  17, 252,  10, 173, 255, 179, 247,   8, 245, 233, 248,  25, 249, 183,
239, 226, 235,  21, 240,  90, 254,  36,  11, 172,  14, 173,   4, 158, 248, 148, 244,   4, 248,  44,
  1,  47,   5, 123,   8, 123,   7,  28,   3, 207, 253,  83, 250, 216, 249, 131, 252, 119,   1, 146,
  4,  77,   8,  74,   7, 198,   3, 192, 254, 230, 248,  72, 247,  40, 247,  86, 246, 249, 246, 127,
245, 226, 247, 105,   1,  74,   6,  69,   5, 249,   3,  34,   2, 179,   1, 143, 254, 164, 251,  58,
252, 213,   0, 234,   2, 224,   2, 139, 254, 249, 250,  59,   0, 178,   7, 221,  14, 154,  10,  38,
  5,  71, 255,  60,   6, 102,  13,  33,  15, 201,   9, 187,   4,   9,   6,  20,   7, 124,  11,  47,
  5, 184,   0, 234, 248, 215, 251, 243, 252, 191, 254, 122, 253, 138, 248,  78, 249, 156, 250,  40,
  0,   8, 254,  27, 247,  73, 236, 218, 234, 205, 236, 189, 250, 134, 254,  60, 248, 217, 240,  70,
246,  61,  24, 119,  54,  33,  60, 133,  22, 122, 228, 153, 203,  53, 222, 108,   0, 129,  18, 195,
  8,  68, 243, 159, 238,  59, 253,  14,  18, 234,  23, 128,  15,  27,   3,  86, 255, 109, 255, 148,
252,  99, 240, 115, 235,  56, 243, 152,   5,  55,  23,  80,  18, 225,   3,  59, 238,  40, 231, 126,
246,  71,   8, 149,  18, 227,   9, 123,   1,  10,   0, 176,   2, 114, 255, 128, 245, 185, 241, 190,
248, 146,   7, 214,  11, 138,   7,  92, 246,  49, 239, 194, 245,  21,   3, 234,   9, 123,   0, 249,
251,  19, 254,  21,   6, 196,   2,  46, 251, 230, 248,  56, 252,  47,   3,   3,   4, 158, 252, 224,
244,  46, 245, 159, 254, 250,   8,  71,   8,  53,   0, 253, 247, 155, 243, 172, 242, 221, 245,  21,
250,  71,   0,   5,   6,  25,   9, 207,  12,  45,  13, 218,  13, 138,  13,  66,  13,   1,  10, 110,
  5, 209, 254, 182, 250, 218, 252, 229,   0,  57,   6, 144,   7, 245,   6, 207,   2,  58,   9,   8,
 11, 189,  12, 202,   6, 197, 252, 187, 252, 235, 248,  70, 250,  69, 247,  45, 248,   6, 249, 142,
247, 171, 246,  51, 246, 194, 251, 204, 248,  29, 237,   0, 229, 215, 241,  79,  14,  76,  33,   4,
 27,  15,   5,  69, 252, 132,   5,  53,  19, 172,  10,  99, 246, 125, 232,  95, 240, 121, 253,  49,
  3, 236,   3, 236,   7, 147,  16,  65,  13, 190,   0, 111, 244,   4, 246, 186, 251,  77, 253, 214,
244,  32, 244,  17, 250,  90,   2, 100,   5, 192,   2, 111,   2, 207,   2, 151, 254, 108, 253, 237,
  1, 185,   9,  77,  11, 166,   0, 114, 250, 113, 254,  59,   7,  56,  11,  17,   1,   9, 244,  39,
242, 161, 249, 199,   1, 143, 254,  15, 250, 217, 246, 186, 248, 130, 248, 131, 248, 177, 247, 182,
249,   0, 249, 149, 247, 122, 249, 227, 253,  65,   4,  36,   9,  27,   9,  53,   6, 203,   3, 162,
255, 218, 254,  53, 253, 239,   1, 164,   3, 246,   0, 133, 252,   7, 253, 110,   7,  89,  15,  85,
 16,  15,   7,  90,   3,  92,   9,  12,  15,  35,  17,  16,   5,  47,   3, 208,   0, 189,   5, 199,
  2,   7, 248, 201, 246, 148, 247, 169,   1, 177,   1,  31, 255,  62, 248, 196, 244, 252, 242,  52,
243,   3, 240, 235, 228,  53, 233, 153, 251,  47,  20,  53,  30,  56,  19,  79,   8, 110,   2,  57,
 14, 174,  14, 111,   0, 228, 236, 229, 230,  76, 241, 201,   0, 192,  13, 142,  13, 130,   9, 247,
  0, 155,   2,  94,   2, 201,   3,  13, 253, 208, 241, 127, 234,  51, 236,  88, 247, 227, 255,  72,
  4, 177,   6, 141,   6,  16,   6, 105,   5, 145,   5, 123,   6, 247,   5,  11,   5, 214, 253, 217,
249,  57, 249, 162, 253, 197, 253,   8, 255,  63, 255,  18,   1, 208,   2, 135,   3, 248,   3,  27,
  1, 226, 255, 149, 253, 194, 249, 251, 244, 206, 244, 134, 245, 150, 247, 238, 247, 223, 254, 204,
  4, 128,  11, 247,  11, 241,   9, 130,   4,  58, 255,  12, 252, 213, 246, 118, 244, 152, 241, 137,
245, 197, 247,  11, 251, 132, 255, 210,   7,  13,  13, 170,  15, 164,  12, 248,   9,  94,   6,  11,
  9,  98,   8, 192,   7, 213,   2, 165,   1, 205,   8,  65,  12, 205,  14, 153,   3, 168,   2, 214,
  0, 223,   7, 138,   4, 150, 253, 123, 249, 242, 247,  99, 254, 105, 254, 240, 255, 149, 248, 152,
245, 171, 242, 122, 244, 249, 245, 180, 239,  13, 235,  91, 238, 252, 255, 160,  18,  93,  24, 195,
 13,  18,   0, 151,   1, 251,  10, 141,  14, 134,   2,  86, 240, 127, 234, 199, 243, 148,   6,  12,
 18,  27,  20, 225,  11, 227,   3,  45, 255, 202, 253,  84, 253, 206, 245, 174, 236, 154, 233, 146,
242, 198, 253, 225,   3, 171,   0, 171, 253, 214,   0,  57,   7, 104,   7,   4,   0,  51, 250, 103,
250, 199,   1, 217,   6,   6,   9, 150,   7,  80,   3, 142,   2, 205,   3, 113,   8, 160,   5, 129,
  1, 185, 251, 112, 248, 243, 247, 243, 245, 134, 248,  60, 246, 221, 248, 216, 249,  47, 254, 134,
255, 242,   0, 209,   3,  54,   1, 194,   0, 179, 253,  33, 255, 169, 253,  39, 252,  25, 251, 121,
250,  81, 255, 191,   2,  16,   6,  92,   4, 218,   4,  47,   4, 209,   1, 194,   0,  80,   2,  31,
  5,  34,   6,  66,   8,  28,   9,  52,   8, 220,   3,  42,   3,  58,   4, 223,   8, 168,   4, 198,
254,  22, 246,  37, 247, 216, 253, 170,   0,  63,   1,  90, 252,  11, 255,  68, 252, 157, 252,  91,
246,  96, 244, 175, 242,  58, 241, 188, 241,  30, 241, 245, 246, 106, 254, 164,  13, 122,  23,   2,
 29,  13,  24,  68,  15, 130,   5,  50,   0, 159, 253,  51, 248,  26, 242, 192, 239,  80, 252, 120,
 11,  70,  22, 132,  15,  87,   2, 201, 246,  28, 247, 167, 251,   9, 248,  20, 241,  80, 231,  53,
233, 157, 239, 114, 252, 173,   6, 169,  11, 155,  11, 102,   7, 235,   5,  61,   5,  34,   8, 194,
  8,  19,   7,  35,   2, 247, 251,  68, 247, 187, 246, 255, 253, 127,   7, 248,  11,  47,  10,  95,
  2, 123, 254, 227, 253, 244, 253,  47, 253, 250, 249,  94, 249, 191, 249,  71, 252, 210, 252,  26,
253,  34, 255, 122,   6, 160,  10,  85,   8, 244, 254, 210, 245, 198, 244,  51, 247, 225, 252, 163,
252, 242, 250, 110, 250,  67, 254, 180,   0,  68,   2, 253,   3,  94,   7, 233,  11, 137,   8,  52,
  3, 166, 253,  75, 255,  93,   4, 214,   7,  65,   9, 151,   7, 224,   5, 134,   4, 152,   3,  87,
  5,  17,   5,  41,   3,  10,   0, 112, 254, 135, 254, 101, 255,  21, 253, 181, 251, 113, 254, 242,
252,   0, 250,  71, 240, 108, 237,  10, 240, 100, 248,  16, 250, 152, 249, 132, 249, 137,   0,  55,
 12, 208,  20,  93,  26, 224,  20, 122,  14,  82, 255, 137, 250, 108, 251,   2,   1,  99, 254,  88,
244, 212, 241, 213, 255,  29,  20,  30,  23,  39,  11,  18, 248, 141, 241,  13, 246,   5, 253, 171,
252, 247, 242, 114, 235, 236, 237, 203, 249,  98,   5, 242,   6, 178,   3,  70,   1, 110,   2, 124,
  4, 226,   2, 189,   0, 164,   1,  47,   4, 221,   3, 111, 254, 101, 249, 233, 251, 196,   5,   9,
 13,   6,  14, 215,   5,  13,   0, 122, 253, 213, 254,  73, 254, 125, 247, 221, 242, 138, 242, 179,
250,  12, 255, 120,   0, 217, 253,   6,   3, 206,  11,  73,  15,   2,   4, 129, 243, 105, 238, 141,
244,  64,   0,  41,   0, 172, 252,  48, 248, 112, 249,  21, 252, 169,   2, 149,   7, 222,   7,  79,
  5,  19,   2,  77,   3, 106,   4, 132,   6, 209,   6,  74,  10, 253,  10, 157,   8,  42,   4, 240,
255, 130, 255, 217,   3, 174,   6,  23,   5, 145, 254, 196, 250,  59, 253, 217,   1,   7,   2, 151,
255, 145, 254,  85, 253,  59, 249, 135, 242,  10, 238, 118, 239,  65, 246, 215, 250,   8, 253,  48,
254, 184,   3, 210,  11,  12,  22, 100,  22,  46,  16,  70,   2,   5, 251, 202, 250, 194, 252, 188,
250, 140, 243,  56, 245,   8, 255, 185,  13,  50,  14, 111,   6, 202, 252, 247, 252, 117, 255,  21,
  0, 221, 251, 208, 245, 130, 243, 138, 244, 148, 250, 100,   0, 111,   2,  16,   0,  52, 254, 137,
  0, 248,   4,  80,   5, 114,   3,  75,   1, 102,   2, 111,   2, 149, 255, 186, 250,  93, 250, 174,
  0,  10,   7, 172,   6,  43,   1,  25, 254, 202, 255,  38,   2, 241, 255,  86, 252,  14, 251, 218,
252, 163, 254, 223, 254, 234, 255, 157,   2,  45,   5,  68,   6, 110,   3, 118, 255, 229, 251, 214,
249,  15, 251, 131, 252,   0, 254, 160, 253, 250, 252,  33, 253,  33, 255, 160,   0, 215,   1,  97,
  2, 178,   2,  41,   2, 242,   0, 254,   1,  28,   4, 240,   5, 133,   5, 154,   3, 252,   1, 121,
  1,  37,   0,  59,   0,  90,   1,  83,   2, 198,   0, 221, 253, 249, 252, 163, 255, 171,   1, 225,
  1, 255, 255,  33, 254, 129, 254, 137, 252,  51, 251, 173, 250,  22, 252,  23, 254, 211, 253,  40,
252, 160, 253, 244,   2,  59,   8, 218,   8,  90,   4, 155, 255, 100, 254, 227, 254, 232, 255, 128,
253, 159, 250, 218, 250, 152, 254, 166,   4, 107,   6, 203,   3, 153, 254, 222, 252, 145, 253, 255,
254, 137, 255, 116, 254, 210, 251, 197, 249, 166, 251,  46,   0,  27,   3, 141,   1, 251, 254, 160,
255, 237,   2, 143,   3, 129,   1, 251, 255,  11,   1, 240,   1, 172,   0, 123, 254,  38, 254, 228,
  0, 102,   3,   1,   3, 248,   0, 203, 255,  38,   0,  68,   0, 120, 255,  15, 255, 209, 254,  27,
254, 148, 253,   1, 254,  88, 255, 209,   0,  61,   1, 213,   1,  61,   2, 149,   0,  24, 254, 220,
252,  63, 253,  43, 255,   1,   0,  68, 255,  48, 254, 247, 253, 117, 255, 249,   0,  88,   1, 178,
  0,  21,   1,  51,   1,  36,   1, 170,   0,   3,   1,  55,   2,  82,   2, 210,   1,  58,   1, 248,
  0, 244,   0, 169,   0, 215,   0, 116,   1,  12,   1, 107,   0, 131, 255, 137, 255, 197, 255,  52,
  0, 253, 255,  46, 255,   6, 254,  20, 253,  55, 253, 254, 253, 213, 254, 162, 254,  27, 254, 182,
254, 114,   0,  43,   2,  49,   3,  53,   3,   1,   2, 143,   0, 150, 255, 242, 254, 191, 255, 109,
255,  37, 255, 235, 254,  97,   0, 206,   1, 229,   1, 253,   0, 204, 255, 252, 255, 238, 255, 252,
255, 112, 254,  60, 254, 192, 253, 124, 254, 114, 255, 121,   0, 225,   0, 241, 255, 199, 255,  39,
  0,  14,   1, 234,   0,  76,   0, 180, 255, 207, 255, 229, 255, 138, 255, 151, 255,  26,   0, 163,
  0, 255,   0, 168,   0,  78,   0, 175, 255, 150, 255, 122, 255, 159, 255, 114, 255, 133, 255, 135,
255, 214, 255,  76,   0, 121,   0, 139,   0,  10,   0,  17,   0, 182, 255, 200, 255,  80, 255, 150,
255, 191, 255,  55,   0,  41,   0,   3,   0, 169, 255,  94, 255, 183, 255, 217, 255,  85,   0,  25,
  0,  53,   0, 247, 255,  41,   0,  78,   0, 122,   0, 132,   0,  14,   0, 213, 255, 172, 255,   4,
  0,  59,   0, 118,   0,  84,   0,  20,   0, 252, 255, 253, 255,  61,   0,  12,   0, 228, 255, 179,
255, 236, 255,  32,   0,  25,   0, 242, 255, 169, 255, 233, 255, 242, 255, 251, 255, 216, 255, 208,
255, 250, 255,  64,   0, 106,   0,  68,   0,   1,   0, 203, 255, 252, 255,  25,   0,  50,   0, 241,
255, 220, 255, 233, 255,  10,   0,  58,   0,  37,   0, 255, 255, 227, 255, 248, 255, 254, 255, 243,
255, 216, 255, 170, 255, 186, 255, 223, 255,   5,   0,  16,   0,  13,   0,  10,   0,   9,   0,  15,
  0,   7,   0,  32,   0,  12,   0, 252, 255, 202, 255, 208, 255, 237, 255,   8,   0,   8,   0, 244,
255, 251, 255, 248, 255,  15,   0,   9,   0,   2,   0, 253, 255, 238, 255,   4,   0, 248, 255, 231,
255, 210, 255, 210, 255, 248, 255,  10,   0,  22,   0, 250, 255, 242, 255, 241, 255, 251, 255,  21,
  0,  36,   0,  40,   0,  23,   0, 253, 255, 249, 255,   0,   0,  20,   0,  21,   0, 255, 255, 245,
255, 239, 255, 255, 255,  15,   0,  25,   0,  10,   0,   1,   0, 238, 255, 229, 255, 241, 255, 241,
255, 250, 255, 247, 255, 253, 255, 245, 255, 234, 255, 244, 255,   3,   0,   6,   0, 254, 255, 248,
255,   5,   0,  15,   0,   4,   0,   5,   0, 241, 255, 246, 255, 250, 255, 255, 255,   5,   0, 247,
255, 252, 255,   2,   0,   3,   0,   7,   0,   4,   0,   1,   0,   2,   0, 248, 255, 251, 255, 251,
255, 255, 255,   9,   0,   2,   0,   9,   0, 251, 255,   0,   0, 251, 255, 251, 255, 255, 255, 253,
255,   0,   0,   0,   0, 249, 255,   1,   0, 250, 255,   5,   0, 247, 255,   0,   0, 255, 255, 255,
255, 255, 255, 255, 255,   0,   0, 253, 255, 251, 255, 252, 255, 255, 255, 255, 255,   2,   0,   1,
  0,   0,   0, 255, 255,   3,   0, 255, 255,   2,   0, 250, 255,   4,   0, 249, 255, 255, 255, 253,
255,   3,   0,   0,   0,   0,   0, 254, 255, 253, 255,   1,   0, 253, 255,   3,   0, 254, 255,   2,
  0,   0,   0, 253, 255,   0,   0, 254, 255,   2,   0, 254, 255,   4,   0, 253, 255,   0,   0, 253,
255, 255, 255,   3,   0, 254, 255, 255, 255,   1,   0, 251, 255,   3,   0, 252, 255,   4,   0, 252,
255,   1,   0, 255, 255, 255, 255,   0,   0,   1,   0, 254, 255,   0,   0, 254, 255,   1,   0,   0,
  0, 254, 255,   2,   0, 253, 255,   3,   0, 253, 255,   2,   0,   1,   0, 254, 255,   4,   0, 253,
255,   2,   0, 255, 255,   2,   0,   0,   0, 254, 255,   1,   0, 254, 255,   4,   0, 253, 255,   4,
  0, 253, 255,   2,   0, 254, 255,   0,   0,   2,   0, 253, 255,   6,   0, 250, 255,   3,   0, 255,
255, 255, 255,   1,   0,   0,   0, 254, 255,   2,   0, 255, 255,   0,   0, 255, 255, 255, 255,   0,
  0,   1,   0,   1,   0,   1,   0,   0,   0, 255, 255, 255, 255,   2,   0,   0,   0,   1,   0, 254,
255,   0,   0,   1,   0,   0,   0,   0,   0, 255, 255, 254, 255,   5,   0, 253, 255,   4,   0, 252,
255, 255, 255,   0,   0,   0,   0,   0,   0, 254, 255, 255, 255,   0,   0,   1,   0,   2,   0, 253,
255,   2,   0, 253, 255,   4,   0, 255, 255,   0,   0,   1,   0, 253, 255,   4,   0, 253, 255,   2,
  0, 255, 255,   0,   0, 255, 255, 254, 255,   1,   0, 255, 255,   0,   0,   1,   0, 252, 255,   3,
  0, 251, 255,   6,   0, 250, 255,   4,   0, 253, 255,   2,   0, 254, 255,   1,   0, 255, 255, 255,
255,   1,   0, 254, 255,   0,   0, 254, 255,   2,   0, 254, 255,   3,   0, 253, 255,   2,   0,   0,
  0,   1,   0,   2,   0, 254, 255,   1,   0, 252, 255,   4,   0, 254, 255,   3,   0, 252, 255,   2,
  0, 252, 255,   3,   0, 255, 255, 254, 255,   3,   0, 253, 255,   3,   0, 254, 255,   2,   0, 255,
255,   2,   0, 254, 255,   1,   0,   1,   0, 255, 255,   2,   0, 253, 255,   2,   0, 252, 255,   3,
  0, 254, 255,   1,   0,   1,   0, 253, 255,   4,   0, 252, 255,   4,   0, 253, 255,   1,   0, 255,
255,   0,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   0,   0, 255, 255,   0,   0,   1,
  0, 254, 255,   2,   0, 253, 255,   2,   0,   0,   0,   0,   0,   1,   0, 255, 255,   2,   0, 254,
255,   4,   0, 251, 255,   4,   0, 251, 255,   4,   0, 252, 255,   4,   0, 252, 255,   4,   0, 252,
255,   2,   0, 255, 255,   1,   0, 255, 255,   0,   0,   1,   0,   0,   0,   2,   0, 252, 255,   5,
  0, 252, 255,   4,   0, 253, 255,   1,   0,   0,   0,   0,   0,   2,   0,   0,   0,   0,   0,   1,
  0,   0,   0,   2,   0,   0,   0,   1,   0,   0,   0, 255, 255,   1,   0, 254, 255,   5,   0, 251,
255,   5,   0, 252, 255,   2,   0, 255, 255,   2,   0, 253, 255,   5,   0, 252, 255,   2,   0, 255,
255,   0,   0,   2,   0,   0,   0, 255, 255,   2,   0, 252, 255,   4,   0, 255, 255,   1,   0,   1,
  0, 255, 255,   1,   0,   1,   0, 255, 255,   2,   0, 254, 255,   2,   0, 253, 255,   3,   0, 254,
255,   0,   0,   1,   0, 254, 255,   2,   0, 254, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,
  0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   0,   0,   0,   0, 255, 255,   1,
  0,   0,   0, 255, 255,   4,   0, 250, 255,   6,   0, 252, 255,   2,   0,   1,   0, 254, 255,   0,
  0,   1,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   1,   0, 254, 255,   2,   0, 255,
255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 254, 255,   2,
  0, 254, 255,   1,   0, 255, 255,   0,   0,   1,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,
  0,   1,   0, 255, 255,   0,   0,   1,   0, 254, 255,   3,   0, 252, 255,   4,   0, 252, 255,   3,
  0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0,   1,   0, 254, 255,   1,
  0,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   1,   0, 254,
255,   2,   0, 254, 255,   3,   0, 253, 255,   2,   0, 254, 255,   1,   0,   1,   0, 254, 255,   2,
  0, 255, 255, 255, 255,   2,   0, 254, 255,   2,   0, 254, 255,   3,   0, 251, 255,   5,   0, 252,
255,   3,   0, 254, 255,   1,   0, 255, 255,   1,   0,   0,   0, 255, 255,   1,   0,   0,   0, 255,
255,   2,   0, 254, 255,   0,   0,   2,   0, 253, 255,   3,   0, 254, 255,   0,   0,   1,   0, 255,
255,   1,   0, 255, 255,   0,   0,   0,   0,   1,   0, 255, 255,   1,   0, 255, 255,   0,   0,   1,
  0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,
  0,   0,   0, 255, 255,   1,   0, 255, 255,   1,   0,   0,   0,   0,   0, 255, 255,   1,   0,   0,
  0,   0,   0,   0,   0, 255, 255,   2,   0, 254, 255,   3,   0, 253, 255,   1,   0,   1,   0, 255,
255,   0,   0,   1,   0, 255, 255,   1,   0,   0,   0, 255, 255,   0,   0,   2,   0, 254, 255,   1,
  0,   0,   0, 255, 255,   2,   0, 254, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255,
255,   1,   0, 255, 255,   1,   0, 255, 255,   0,   0,   1,   0, 255, 255,   1,   0, 255, 255,   0,
  0,   1,   0, 255, 255,   0,   0,   1,   0, 254, 255,   2,   0,   0,   0, 254, 255,   2,   0, 255,
255, 255, 255,   3,   0, 253, 255,   2,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,
  0,   0,   0,   1,   0, 255, 255,   0,   0,   1,   0, 254, 255,   3,   0, 253, 255,   2,   0,   0,
  0, 255, 255,   1,   0, 255, 255,   0,   0,   1,   0,   0,   0, 255, 255,   1,   0, 255, 255,   1,
  0,   0,   0,   0,   0,   0,   0, 255, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255,   1,   0,   0,   0, 255, 255,   2,   0, 253, 255,   3,   0, 253, 255,   3,   0, 254, 255,   2,
  0, 254, 255,   1,   0,   0,   0, 255, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0, 255,
255,   1,   0, 255, 255,   1,   0,   0,   0, 255, 255,   0,   0,   1,   0, 255, 255,   1,   0, 255,
255,   0,   0,   0,   0,   1,   0, 255, 255,   1,   0, 255, 255,   0,   0,   1,   0, 255, 255,   2,
  0, 253, 255,   2,   0, 255, 255,   1,   0,   0,   0, 255, 255,   0,   0,   1,   0, 254, 255,   3,
  0, 253, 255,   2,   0, 255, 255,   0,   0,   1,   0, 255, 255,   1,   0, 255, 255,   0,   0,   1,
  0, 255, 255,   1,   0, 255, 255,   0,   0,   0,   0,   0,   0,   1,   0, 254, 255,   3,   0, 253,
255,   1,   0,   1,   0, 255, 255,   1,   0, 255, 255,   0,   0,   1,   0, 255, 255,   1,   0, 254,
255,   2,   0, 255, 255,   1,   0, 255, 255,   1,   0, 254, 255,   4,   0, 252, 255,   3,   0, 254,
255,   1,   0,   0,   0,   0,   0, 255, 255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,
  0, 253, 255,   4,   0, 252, 255,   3,   0, 254, 255,   1,   0,   0,   0,   0,   0, 255, 255,   1,
  0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   1,   0,   0,   0,   0,   0,   0,   0, 255,
255,   2,   0, 253, 255,   4,   0, 252, 255,   3,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,
  0, 255, 255,   2,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  0,   1,   0, 253, 255,   4,   0, 252, 255,   3,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,
  0, 255, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 254, 255,   2,
  0, 254, 255,   2,   0, 254, 255,   2,   0, 254, 255,   2,   0, 254, 255,   2,   0, 254, 255,   2,
  0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255,   3,   0, 252, 255,   4,   0, 252, 255,   3,   0, 255, 255, 255, 255,   1,   0, 255, 255,   1,
  0,   0,   0, 255, 255,   0,   0,   1,   0, 255, 255,   2,   0, 253, 255,   2,   0, 255, 255,   1,
  0, 255, 255,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   1,   0, 254, 255,   2,   0, 254,
255,   2,   0,   0,   0, 254, 255,   3,   0, 252, 255,   5,   0, 252, 255,   3,   0, 253, 255,   3,
  0, 253, 255,   3,   0, 254, 255,   0,   0,   2,   0, 252, 255,   5,   0, 252, 255,   2,   0,   0,
  0, 255, 255,   1,   0,   0,   0, 255, 255,   1,   0,   0,   0, 255, 255,   2,   0, 254, 255,   1,
  0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 254, 255,   2,   0, 254, 255,   1,
  0,   0,   0, 255, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 254,
255,   2,   0, 255, 255, 255, 255,   3,   0, 252, 255,   4,   0, 253, 255,   1,   0,   1,   0, 254,
255,   2,   0, 254, 255,   2,   0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   1,
  0,   0,   0, 255, 255,   2,   0, 253, 255,   3,   0, 253, 255,   3,   0, 254, 255,   1,   0,   0,
  0, 255, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   0, 254,
255,   3,   0, 252, 255,   5,   0, 250, 255,   6,   0, 251, 255,   4,   0, 253, 255,   1,   0,   0,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   0, 254, 255,   3,   0, 252,
255,   4,   0, 254, 255,   0,   0,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 253, 255,   3,   0, 254,
255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 255, 255,   1,   0, 254,
255,   3,   0, 253, 255,   3,   0, 253, 255,   2,   0, 255, 255,   1,   0,   0,   0, 254, 255,   2,
  0, 255, 255,   0,   0,   1,   0, 255, 255, 255, 255,   3,   0, 252, 255,   4,   0, 253, 255,   3,
  0, 252, 255,   5,   0, 251, 255,   4,   0, 254, 255,   1,   0, 255, 255,   2,   0, 253, 255,   2,
  0,   0,   0, 255, 255,   2,   0, 254, 255,   0,   0,   2,   0, 253, 255,   3,   0, 253, 255,   3,
  0, 254, 255,   0,   0,   1,   0, 255, 255,   0,   0,   1,   0, 255, 255,   0,   0,   1,   0, 254,
255,   2,   0, 255, 255,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   1,   0, 254,
255,   3,   0, 253, 255,   2,   0, 255, 255,   0,   0,   1,   0, 255, 255,   0,   0,   1,   0, 255,
255,   0,   0,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  0,   0,   0,   0,   0, 255, 255,   2,   0, 254, 255,   2,   0, 254, 255,   1,   0,   1,   0, 253,
255,   5,   0, 250, 255,   5,   0, 253, 255,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255,   2,   0, 254, 255,   2,   0, 254, 255,   1,   0,   0,   0,   0,   0,   0,   0, 255, 255,   1,
  0, 255, 255,   1,   0,   0,   0, 254, 255,   3,   0, 252, 255,   5,   0, 251, 255,   5,   0, 251,
255,   4,   0, 253, 255,   3,   0, 253, 255,   2,   0, 255, 255,   0,   0,   1,   0, 254, 255,   2,
  0, 254, 255,   2,   0, 254, 255,   1,   0,   1,   0, 253, 255,   4,   0, 251, 255,   6,   0, 250,
255,   5,   0, 252, 255,   3,   0, 255, 255,   0,   0, 255, 255,   2,   0, 254, 255,   2,   0, 254,
255,   2,   0, 253, 255,   4,   0, 252, 255,   3,   0, 255, 255, 255, 255,   2,   0, 253, 255,   4,
  0, 252, 255,   3,   0, 254, 255,   2,   0, 254, 255,   2,   0, 254, 255,   1,   0,   1,   0, 254,
255,   2,   0, 255, 255,   0,   0,   1,   0, 254, 255,   2,   0, 255, 255,   0,   0,   1,   0, 254,
255,   2,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   1,   0, 254, 255,   1,   0,   0,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   2,   0, 254,
255,   2,   0, 255, 255, 255, 255,   2,   0, 253, 255,   4,   0, 253, 255,   1,   0,   0,   0, 255,
255,   2,   0, 254, 255,   1,   0,   0,   0, 255, 255,   2,   0, 254, 255,   2,   0, 255, 255,   0,
  0,   0,   0,   0,   0,   1,   0, 255, 255,   2,   0, 252, 255,   5,   0, 251, 255,   4,   0, 254,
255,   1,   0,   0,   0, 255, 255,   1,   0, 255, 255,   2,   0, 254, 255,   2,   0, 253, 255,   4,
  0, 105, 100,  51,  32,  34,   0,   0,   0,  73,  68,  51,   3,   0,   0,   0,   0,   0,  24,  84,
 88,  88,  88,   0,   0,   0,  14,   0,   0,   0,  84,  88,  88,  88,   0, 105, 115, 111, 109, 109,
112,  52,  50 };


// Setup Serial, motor and Pixy2
void setup() {
  // Setup Serial Port
  Serial.begin(115200);

  // Pixy2
  Serial.print("Starting...\n");
  pixy.init();

  // Motor
  for (int i = 0; i < 2; i++) {
      pinMode(pwmPin[i], OUTPUT);
  }

  // Sliding Window Average
  for (int thisReading = 0; thisReading < numReadings; thisReading++) {
    readings[thisReading] = 0;
  }
}


// Functions

// Sliding Window Average
int updateAverage(int newValue) {
  // 从总和中减去最早的读数
  total = total - readings[readIndex];
  // 读取新的值
  readings[readIndex] = newValue;
  // 将新值加到总和中
  total = total + readings[readIndex];
  // 移动到下一个位置
  readIndex = readIndex + 1;

  // 如果我们到达数组的末尾，则回到开始
  if (readIndex >= numReadings) {
    readIndex = 0;
  }

  // 计算平均值
  average = total / numReadings;
  return average;
}

// Calculate Offset
int getPositionDifference(int xPosition, int middlePosition = 157) {
    int positionDifference = xPosition - middlePosition;
    int mappedDifference = map(positionDifference, -middlePosition, middlePosition, -128, 128);
    
    return mappedDifference;
}

void motorControl(int targetSpeed, int rotationOffset) {
  // 将旋转偏移映射到较小的范围
  int width = (pixy.frameWidth / 2);
  rotationOffset = map(rotationOffset, -width, width, -10, 10);

  // 计算左右电机的速度
  int speedL = targetSpeed + rotationOffset;
  int speedR = targetSpeed - rotationOffset;

  // 映射到 PWM 范围
  speedL = map(speedL, 0, 100, MIN_SPEED, MAX_SPEED);
  speedR = map(speedR, 0, 100, MIN_SPEED, MAX_SPEED);

  printCurrentSpeed(speedL, speedR);

  // 为电机设置PWM
  analogWrite(pwmPin[0], speedL);
  analogWrite(pwmPin[1], speedR);
}


// Pig Mode
void randomWalk() {
    int walkSpeed = MAX_SPEED;
    int totalWalkDuration = random(2000, 5000); // 总行走持续时间（毫秒）
    int decisionInterval = random(500, 1500); // 偏移决策间隔（毫秒）

    unsigned long startTime = millis();
    unsigned long lastDecisionTime = 0;

    while (millis() - startTime < totalWalkDuration) {
        // 每隔一定时间决定是否偏移
        if (millis() - lastDecisionTime > decisionInterval) {
            int rotationOffset = random(-128, 128); // 随机偏移量
            if (random(2) == 0) { // 有一半的概率应用偏移
                rotationOffset = 0;
            }

            // 应用当前的速度和偏移量
            motorControl(walkSpeed, rotationOffset);

            lastDecisionTime = millis();
            decisionInterval = random(500, 1500); // 重新设置下次决策间隔
        }

        delay(50); // 短暂延迟以减少处理
    }

    // 停下来
    motorControl(0, 0);
    int stopDuration = random(500, 3000); // 停止时间
    delay(stopDuration);
}

void followCarrot() {
  int blockCount = pixy.ccc.getBlocks();
  bool isTargetDetected = false;

  if (blockCount > 0) {
    for (int i = 0; i < blockCount; i++) {
      if (pixy.ccc.blocks[i].m_signature == CARROT_SIGNATURE) {
        int xPosition = pixy.ccc.blocks[i].m_x;
        int objectWidth = pixy.ccc.blocks[i].m_width;
        int objectHeight = pixy.ccc.blocks[i].m_height;

        Serial.print("物體");
        Serial.print(i + 1);
        Serial.print(": X Position = ");
        Serial.println(xPosition);
        Serial.print("Width: ");
        Serial.print(objectWidth);
        Serial.print(", Height: ");
        Serial.println(objectHeight);

        // 检查物体大小是否超过阈值
        if (objectWidth > SIZE_THRESHOLD || objectHeight > SIZE_THRESHOLD) {
          motorControl(0, 0); // 停止电机
        } else {
          int newPosition = getPositionDifference(xPosition);
          int smoothPosition = updateAverage(newPosition);
          motorControl(100, smoothPosition); // 控制电机
        }

        isTargetDetected = true;
      }
    }
  }

  if (!isTargetDetected) {
    motorControl(0, 0); // 如果没有检测到目标物体，停止电机
  }
}

void followCarrotOld() {
  // 获取并打印检测到的所有物体
  int blockCount = pixy.ccc.getBlocks();

  // 是否检测到了指定签名的物体
  bool isTargetDetected = false;

  // 如果至少检测到一个物体
  if (blockCount > 0) {
    // 遍历所有检测到的物体
    for (int i = 0; i < blockCount; i++) {
      if (pixy.ccc.blocks[i].m_signature == CARROT_SIGNATURE) {
        int xPosition = pixy.ccc.blocks[i].m_x;

        Serial.print("物體");
        Serial.print(i + 1);
        Serial.print(": X Position = ");
        Serial.println(xPosition); 

        Serial.println(getPositionDifference(xPosition));

        int newPosition = getPositionDifference(xPosition);
        int smoothPosition = updateAverage(newPosition);
        motorControl(100, smoothPosition);
        isTargetDetected = true;
      }
    }
  }

  // 如果没有检测到目标物体
  if (!isTargetDetected) {
    motorControl(0, 0); // 停止电机
  }
}


// Test Unit
void testPrintPositionDiff() {
  // 获取并打印检测到的所有物体
  int blockCount = pixy.ccc.getBlocks();

  // 如果至少检测到一个物体
  if (blockCount > 0) {
    // 遍历所有检测到的物体
    for (int i = 0; i < blockCount; i++) {
      int xPosition = pixy.ccc.blocks[i].m_x;

      Serial.print("物體");
      Serial.print(i + 1);
      Serial.print(": X Position = ");
      Serial.println(xPosition); 

      Serial.println(getPositionDifference(xPosition));
      motorControl(100, getPositionDifference(xPosition));
    }
  }
}

void printCurrentSpeed(int speedL, int speedR) { // 列印速度數值
    Serial.print("Left: ");
    Serial.print(speedL);
    Serial.print(" | Right: ");
    Serial.println(speedR);
    
}


// Main
void loop() {
  followCarrot();
}